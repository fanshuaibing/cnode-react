(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{133:function(e,t,a){e.exports=a(247)},138:function(e,t,a){},143:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){},245:function(e,t,a){},247:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(8),l=a.n(r),i=(a(138),a(139),a(130)),s=(a(141),a(47)),o=a(34),m=(a(143),a(51)),u=a.n(m);u.a.defaults.baseURL="https://cnodejs.org/api/v1";var f="/topics",p="/topic/",d="/user/",g={getTopics:function(e){return new Promise((function(t,a){u.a.get(f,{params:e}).then((function(e){t(e)}))}))},getDetail:function(e){return new Promise((function(t,a){u.a.get(p+e).then((function(e){t(e)}))}))},getUserInfo:function(e){return new Promise((function(t,a){u.a.get(d+e).then((function(e){t(e)}))}))}},E=a(21);var h=function(){return c.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},c.a.createElement(E.b,{to:"/"},c.a.createElement("img",{style:{width:"150px",height:"40px"},src:"https://static2.cnodejs.org/public/images/cnodejs_light.svg",alt:""})),c.a.createElement("div",null,c.a.createElement(E.b,{to:"/"},"\u9996\u9875")))},v=(a(248),a(129)),b=(a(101),a(63)),y=a(29),k=(a(169),a(91)),j=(a(171),function(e){var t=e||"";if(!t)return"";var a=new Date(t),n=(new Date).getTime()-a.getTime();return n<0?"":n/1e3<30?"\u521a\u521a":n/1e3<60?parseInt(n/1e3)+"\u79d2\u524d":n/6e4<60?parseInt(n/6e4)+"\u5206\u949f\u524d":n/36e5<24?parseInt(n/36e5)+"\u5c0f\u65f6\u524d":n/864e5<31?parseInt(n/864e5)+"\u5929\u524d":n/2592e6<12?parseInt(n/2592e6)+"\u6708\u524d":parseInt(n/31536e6)+"\u5e74\u524d"});var N=function(e){var t=function(){return e.item.top||e.item.good?"tags":"gray tags"};return e.item.top?c.a.createElement("span",{className:t()},"\u7f6e\u9876"):e.item.good?c.a.createElement("span",{className:t()},"\u7cbe\u534e"):"ask"===e.item.tab?c.a.createElement("span",{className:t()},"\u95ee\u7b54"):"share"===e.item.tab?c.a.createElement("span",{className:t()},"\u5206\u4eab"):c.a.createElement("span",{className:t()},"\u62db\u8058")};var w=function(e){return c.a.createElement("div",{className:"listItem-container",key:e.item.id},c.a.createElement(E.b,{className:"avatar_wrapper",to:"/user/".concat(e.item.author.loginname)},c.a.createElement("img",{className:"avatar",src:e.item.author.avatar_url,alt:""})),c.a.createElement(N,{item:e.item}),c.a.createElement("span",{style:{paddingRight:"10px"}},e.item.reply_count,"/",e.item.visit_count),c.a.createElement(E.b,{className:"title",to:"/artical/".concat(e.item.id),style:{color:"black"}},e.item.title),c.a.createElement("div",{style:{marginLeft:"auto",marginRight:"5px",minWidth:"50px"}},j(e.item.last_reply_at)))},O=(a(172),k.a.TabPane);var _=function(e){var t=Object(n.useState)([]),a=Object(y.a)(t,2),r=a[0],l=a[1],i=Object(n.useState)(""),s=Object(y.a)(i,2),o=s[0],m=s[1],u=Object(n.useState)(1),f=Object(y.a)(u,2),p=f[0],d=f[1];Object(n.useEffect)((function(){E(o?{page:p,tab:o,limit:20}:{page:p,limit:20})}),[p,o]);var E=function(e){g.getTopics(e).then((function(e){l(e.data.data)}))};return r.length?c.a.createElement("div",{className:"listview-container"},c.a.createElement(k.a,{style:{background:"#f6f6f6"},defaultActiveKey:"0",onChange:function(e){switch(e){case"1":m("good"),d(1);break;case"2":m("share"),d(1);break;case"3":m("ask"),d(1);break;case"4":m("job"),d(1);break;default:m(""),d(1)}}},["\u5168\u90e8","\u7cbe\u534e","\u5206\u4eab","\u95ee\u7b54","\u62db\u8058"].map((function(e,t){return c.a.createElement(O,{tab:e,key:t},r.map((function(e,t){return c.a.createElement("div",{key:e.id},c.a.createElement(w,{item:e}))})))}))),c.a.createElement(v.a,{className:"list-pagination",defaultCurrent:1,current:p,total:500,onChange:function(e){d(e)}})):c.a.createElement("div",{className:"listview-container",style:{display:"flex",justifyContent:"center",alignItems:"center"}},c.a.createElement(b.a,{size:"large"}))},x=(a(121),a(40)),I=(a(123),a(16));a(239),a(240);var C=function(e){var t=Object(o.g)().id,a=Object(o.f)(),r=Object(n.useState)({}),l=Object(y.a)(r,2),i=l[0],s=l[1],m=Object(n.useState)({}),u=Object(y.a)(m,2),f=u[0],p=u[1];return Object(n.useEffect)((function(){g.getDetail(t).then((function(e){s(e.data.data),g.getUserInfo(e.data.data.author.loginname).then((function(e){console.log(e.data.data),p(e.data.data)}))}))}),[t]),c.a.createElement("div",{className:"artical-container"},c.a.createElement(x.a,{style:{margin:" 0 10px"}},c.a.createElement(I.a,{span:24},c.a.createElement(x.a,{style:{background:"white",padding:"10px"}},c.a.createElement(I.a,{span:24,style:{borderBottom:"1px solid #e1e1e1"}},c.a.createElement("div",{className:"artical-header"},c.a.createElement(N,{item:i}),c.a.createElement("h1",{style:{margin:"0"}},i.title)),c.a.createElement("span",{className:"img-wrapper",onClick:function(){return e=f.loginname,void a.push("/user/".concat(e));var e}},c.a.createElement("img",{src:f.avatar_url,alt:""}),f.loginname),c.a.createElement("div",null,"\u6d4f\u89c8\u91cf ",i.visit_count)),c.a.createElement(I.a,{span:24},c.a.createElement("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:i.content}}))))))};a(245);var S=function(e){var t=Object(o.g)().username,a=Object(o.f)(),r=Object(n.useState)({}),l=Object(y.a)(r,2),i=l[0],s=l[1];console.log(i.length),Object(n.useEffect)((function(){g.getUserInfo(t).then((function(e){s(e.data.data)}))}),[t]);var m=function(e){a.push("/artical/".concat(e))};return i.loginname?c.a.createElement("div",{className:"userInfo-container"},c.a.createElement(x.a,{style:{background:"white"}},c.a.createElement(I.a,{style:{background:"#cfcfcf"}},c.a.createElement("h3",null,"\u4e2a\u4eba\u4e3b\u9875")),c.a.createElement(I.a,{span:24},c.a.createElement("img",{src:i.avatar_url,alt:i.loginname}),i.loginname),c.a.createElement(I.a,{span:24,className:"info"},i.score,"\u79ef\u5206"),c.a.createElement(I.a,{span:24,className:"info"},"\u6ce8\u518c\u65f6\u95f4\uff1a ",j(i.create_at))),c.a.createElement(x.a,{className:"topics"},c.a.createElement(I.a,{style:{background:"#cfcfcf"}},c.a.createElement("h3",null,"\u521b\u5efa\u7684\u4e3b\u9898")),i.recent_topics&&i.recent_topics.slice(0,5).map((function(e){return c.a.createElement(I.a,{className:"title",key:e.id,span:24,onClick:function(){return m(e.id)}},e.title)}))),c.a.createElement(x.a,{className:"topics"},c.a.createElement(I.a,{style:{background:"#cfcfcf"}},c.a.createElement("h3",null,"\u56de\u590d\u7684\u4e3b\u9898")),i.recent_replies&&i.recent_replies.slice(0,5).map((function(e){return c.a.createElement(I.a,{className:"title",key:e.id,span:24,onClick:function(){return m(e.id)}},e.title)})))):c.a.createElement("div",{className:"userInfo-container",style:{textAlign:"center"}},c.a.createElement(b.a,{size:"large"}))},T=s.a.Header,D=(s.a.Footer,s.a.Sider,s.a.Content);var P=function(){return c.a.createElement("div",{className:"cnode-container"},c.a.createElement(i.a,null),c.a.createElement(s.a,{theme:"light",style:{display:"flex",height:"100%",flexDirection:"column"}},c.a.createElement(T,{style:{background:"#444444"}},c.a.createElement(h,null)),c.a.createElement(D,{style:{background:"#e1e1e1",flexGrow:"1",minHeight:"calc(100vh - 64px)"}},c.a.createElement(o.c,null,c.a.createElement(o.a,{path:"/artical/:id"},c.a.createElement(C,null)),c.a.createElement(o.a,{path:"/user/:username"},c.a.createElement(S,null)),c.a.createElement(o.a,{path:"/"},c.a.createElement(_,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(246);l.a.render(c.a.createElement(E.a,null,c.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[133,1,2]]]);
//# sourceMappingURL=main.f9f3f010.chunk.js.map